// Copyright Titanium I.T. LLC.
"use strict";

const assert = require("util/assert");
const HttpResponse = require("./http_response");

describe("HttpResponse", () => {

	it("has status code, headers, and body", () => {
		const response = HttpResponse.create(
			999,
			{ "my-header": "my-value" },
			"my body"
		);

		assert.equal(response.status, 999);
		assert.deepEqual(response.headers, { "my-header": "my-value" });
		assert.equal(response.body, "my body");
	});

	it("doesn't change response headers when original header object changes", () => {
		const headers = { "my-header": "my-value" };
		const response = HttpResponse.create(
			501,
			headers,
			"irrelevant body"
		);

		headers["new-header"] = "should not appear in response";
		assert.deepEqual(response.headers, { "my-header": "my-value" });
	});

});