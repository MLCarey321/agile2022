// Copyright Titanium I.T. LLC.
"use strict";

const ensure = require("util/ensure");
const EventEmitter = require("events");
const infrastructureHelper = require("util/infrastructure_helper");

const STDOUT_EVENT = "stdout";

/** Wrapper for command-line processing */
module.exports = class CommandLine {

	static create() {
		return new CommandLine();
	}

	constructor() {
		this._emitter = new EventEmitter();
	}

	args() {
		ensure.signature(arguments, []);

		// your production code here
		return process.argv.slice(2);
	}

	trackStdout() {
		return infrastructureHelper.trackOutput(this._emitter, STDOUT_EVENT);
	}

	writeStdout(text) {
		ensure.signature(arguments, [ String ]);

		// your production code here
		this._emitter.emit(STDOUT_EVENT, text);
		process.stdout.write(text);
	}

	writeStderr(text) {
		ensure.signature(arguments, [ String ]);

		// your production code here
		process.stderr.write(text);
	}

};
